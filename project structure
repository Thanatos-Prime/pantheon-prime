# Pantheon Project Structure

Complete GitHub repository structure with CI/CD workflows.

```
pantheon/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml                    # Main CI pipeline
â”‚       â”œâ”€â”€ ethics-gate.yml           # Arctic ethics enforcement
â”‚       â”œâ”€â”€ deploy-backend.yml        # Backend deployment
â”‚       â””â”€â”€ deploy-frontend.yml       # Frontend deployment
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py                   # FastAPI app (from artifact 1)
â”‚   â”‚   â”œâ”€â”€ models.py                 # Pydantic models
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ experiments.py
â”‚   â”‚       â”œâ”€â”€ logs.py
â”‚   â”‚       â””â”€â”€ health.py
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ mother_duck.py            # Logger implementation
â”‚   â”‚   â”œâ”€â”€ arctic_ethics.py          # Ethics evaluator
â”‚   â”‚   â””â”€â”€ ledger.py                 # Conservation ledger
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ test_api.py
â”‚   â”‚   â”œâ”€â”€ test_ethics.py
â”‚   â”‚   â””â”€â”€ test_ledger.py
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pyproject.toml
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ tuner-pro/                    # AI Tuner Pro app
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ App.jsx               # From artifact 1
â”‚   â”‚   â”‚   â”œâ”€â”€ index.jsx
â”‚   â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚   â”‚       â””â”€â”€ client.js
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tailwind.config.js
â”‚   â”‚
â”‚   â””â”€â”€ microscope/                   # Quantum Microscope
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.jsx               # From artifact 2
â”‚       â”‚   â”œâ”€â”€ index.jsx
â”‚       â”‚   â””â”€â”€ components/
â”‚       â”‚       â”œâ”€â”€ TokenView.jsx
â”‚       â”‚       â”œâ”€â”€ KLView.jsx
â”‚       â”‚       â””â”€â”€ AttentionView.jsx
â”‚       â”œâ”€â”€ public/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ physics-backbone/             # Physicsâ†’CS kit
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ledger.py             # From artifact 3
â”‚   â”‚   â”‚   â”œâ”€â”€ entropy.py
â”‚   â”‚   â”‚   â””â”€â”€ slo.py
â”‚   â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â”œâ”€â”€ README.md
â”‚   â”‚   â””â”€â”€ setup.py
â”‚   â”‚
â”‚   â””â”€â”€ qrae/                         # Resource allocator
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ engine.py             # From artifact 4
â”‚       â”‚   â”œâ”€â”€ scenarios.py
â”‚       â”‚   â””â”€â”€ cli.py
â”‚       â”œâ”€â”€ tests/
â”‚       â””â”€â”€ setup.py
â”‚
â”œâ”€â”€ manifests/
â”‚   â”œâ”€â”€ hephaestus_daemon_v1.json     # Forge node config
â”‚   â”œâ”€â”€ pantheon_codex_bridge_v1.json # Codex integration
â”‚   â””â”€â”€ arctic_config.json            # Ethics thresholds
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ architecture.md
â”‚   â”œâ”€â”€ api-reference.md
â”‚   â”œâ”€â”€ deployment.md
â”‚   â””â”€â”€ ethics-guide.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.sh                      # One-command setup
â”‚   â”œâ”€â”€ seed-data.py                  # Generate sample data
â”‚   â””â”€â”€ run-local.sh                  # Local development
â”‚
â”œâ”€â”€ docker-compose.yml                # Local stack
â”œâ”€â”€ README.md
â”œâ”€â”€ LICENSE
â””â”€â”€ .gitignore
```

-----

## CI/CD Workflow Files

### `.github/workflows/ci.yml`

```yaml
name: Pantheon CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  lint-and-test-backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          cd backend
          pip install -r requirements.txt
          pip install pytest ruff mypy
      
      - name: Run ruff (linter)
        run: |
          cd backend
          ruff check .
      
      - name: Run mypy (type checker)
        run: |
          cd backend
          mypy api/ core/
      
      - name: Run tests
        run: |
          cd backend
          pytest tests/ -v --cov=api --cov=core
      
      - name: Ethics Gate Check
        run: |
          cd backend
          python -m core.arctic_ethics --threshold 0.7

  lint-and-test-frontend:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        app: [tuner-pro, microscope]
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: Install dependencies
        run: |
          cd frontend/${{ matrix.app }}
          npm ci
      
      - name: Run ESLint
        run: |
          cd frontend/${{ matrix.app }}
          npm run lint
      
      - name: Run tests
        run: |
          cd frontend/${{ matrix.app }}
          npm test -- --watchAll=false
      
      - name: Build
        run: |
          cd frontend/${{ matrix.app }}
          npm run build

  test-packages:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        package: [physics-backbone, qrae]
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install package
        run: |
          cd packages/${{ matrix.package }}
          pip install -e .
          pip install pytest
      
      - name: Run tests
        run: |
          cd packages/${{ matrix.package }}
          pytest tests/ -v
```

-----

### `.github/workflows/ethics-gate.yml`

```yaml
name: Arctic Ethics Gate

on:
  pull_request:
    branches: [main]

jobs:
  ethics-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Full history for diff
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install ethics scanner
        run: |
          pip install anthropic openai
          cd backend
          pip install -r requirements.txt
      
      - name: Scan code changes
        id: scan
        run: |
          python scripts/ethics_scanner.py \
            --diff origin/main...HEAD \
            --threshold 0.7 \
            --output ethics_report.json
      
      - name: Upload ethics report
        uses: actions/upload-artifact@v4
        with:
          name: ethics-report
          path: ethics_report.json
      
      - name: Check threshold
        run: |
          SCORE=$(jq -r '.overall_score' ethics_report.json)
          echo "Ethics Score: $SCORE"
          if (( $(echo "$SCORE < 0.7" | bc -l) )); then
            echo "âŒ Ethics score below threshold (0.7)"
            exit 1
          fi
          echo "âœ… Ethics gate passed"
      
      - name: Comment on PR
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const report = JSON.parse(fs.readFileSync('ethics_report.json'));
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `## ğŸ›¡ï¸ Arctic Ethics Report
              
              **Overall Score:** ${report.overall_score.toFixed(3)}
              **Status:** ${report.overall_score >= 0.7 ? 'âœ… PASS' : 'âŒ FAIL'}
              
              **Analysis:**
              - Files scanned: ${report.files_scanned}
              - Red flags detected: ${report.red_flags}
              - Recommendation: ${report.recommendation}
              `
            });
```

-----

### `.github/workflows/deploy-backend.yml`

```yaml
name: Deploy Backend

on:
  push:
    branches: [main]
    paths:
      - 'backend/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy to Railway
        uses: railway/deploy@v1
        with:
          service: pantheon-api
          environment: production
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
      
      - name: Health check
        run: |
          sleep 10
          curl -f https://pantheon-api.railway.app/health || exit 1
```

-----

### `.github/workflows/deploy-frontend.yml`

```yaml
name: Deploy Frontend

on:
  push:
    branches: [main]
    paths:
      - 'frontend/**'

jobs:
  deploy-tuner:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_TUNER_PROJECT_ID }}
          working-directory: ./frontend/tuner-pro

  deploy-microscope:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_MICROSCOPE_PROJECT_ID }}
          working-directory: ./frontend/microscope
```

-----

## Quick Start Scripts

### `scripts/setup.sh`

```bash
#!/bin/bash
set -e

echo "ğŸ”¥ Setting up Pantheon Development Environment"

# Backend
echo "ğŸ“¦ Installing backend dependencies..."
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pip install -e ../packages/physics-backbone
pip install -e ../packages/qrae

# Frontend - Tuner Pro
echo "âš›ï¸ Installing Tuner Pro dependencies..."
cd ../frontend/tuner-pro
npm install

# Frontend - Microscope
echo "ğŸ”¬ Installing Microscope dependencies..."
cd ../microscope
npm install

echo "âœ… Setup complete!"
echo ""
echo "To start development:"
echo "  Backend:  cd backend && uvicorn api.main:app --reload"
echo "  Tuner:    cd frontend/tuner-pro && npm start"
echo "  Scope:    cd frontend/microscope && npm start"
```

-----

## Docker Compose Stack

### `docker-compose.yml`

```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - POSTGRES_URL=${POSTGRES_URL}
    depends_on:
      - postgres
    volumes:
      - ./backend:/app
  
  postgres:
    image: postgres:16
    environment:
      - POSTGRES_DB=pantheon
      - POSTGRES_USER=pantheon
      - POSTGRES_PASSWORD=pantheon_dev
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  tuner-frontend:
    build: ./frontend/tuner-pro
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    volumes:
      - ./frontend/tuner-pro:/app
      - /app/node_modules
  
  microscope-frontend:
    build: ./frontend/microscope
    ports:
      - "3001:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:8000
    volumes:
      - ./frontend/microscope:/app
      - /app/node_modules

volumes:
  postgres_data:
```

-----

## GitHub Secrets Required

```
# API Keys
ANTHROPIC_API_KEY
OPENAI_API_KEY

# Deployment
RAILWAY_TOKEN
VERCEL_TOKEN
VERCEL_ORG_ID
VERCEL_TUNER_PROJECT_ID
VERCEL_MICROSCOPE_PROJECT_ID

# Database
POSTGRES_URL
```

-----

## Branch Strategy

```
main          â† Production deployments (protected)
  â†‘
develop       â† Integration branch
  â†‘
feature/*     â† Feature branches
hotfix/*      â† Emergency fixes
```

All PRs to `main` must pass:

1. All tests (backend, frontend, packages)
1. Linting (ruff, ESLint)
1. Type checking (mypy, TypeScript)
1. Ethics gate (Arctic â‰¥ 0.7)
1. 2+ approvals from maintainers